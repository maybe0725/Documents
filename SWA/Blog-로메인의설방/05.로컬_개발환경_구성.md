# 5. 로컬 개발환경 구성

<br/>

출처 - [로메인의 설방 / 로컬 개발환경 구성](https://romainefabula.tistory.com/52)

<br/>

개발 프레임워크를 구현하기 전에 개발환경을 준비해야 한다.
이 환경은 SWA가 프레임워크를 개발할 때도 사용하겠지만, 이걸 그대로 개발자에게 배포해서 실제 업무프로그램을 개발할 때도 사용해야 하니까 처음부터 가볍고 편리하게 사용할 수 있도록 하는 것이 중요하다.
결국 개발환경이 개발생산성에도 영향을 미친다는 의미다.

가장 먼저 선택할 것은 Java 버전이다.
Java 버전에 따라 선택할 수 있는 WAS의 버전 선택의 폭이 결정된다.
통합개발환경은 WAS의 Java 버전과 다르게 선택할 수 있긴 하지만 대개 동일한 버전을 선택하기 때문에 영향이 가장 크다.

다음으로 통합개발환경(IDE)을 선택해야 하는데 일반적으로는 이클립스를 사용하는 것이 좋다.
물론, IntelliJ 같은 좋은 유료 도구가 있긴 하지만, 통합개발환경 선택에서 가장 먼저 고려해야 할 것은 모든 개발자가 사용해야 한다는 것이다.
모든 사용자가 유료 도구를 사용할 수 있을만큼 프로젝트 비용이 충분하다면 좋겠지만, 아직까지 그런 프로젝트를 본 적이 없기 때문에 보통은 이클립스를 사용한다.

일단 이클립스를 선택했지만, 여기서도 다양한 버전이 있기 때문에 어떤 버전을 선택할지 결정해야 한다.
일단, 개발자 윈도우 OS에 따라서 32bit인지 64bit인지를 선택해야 한다.
요즘 대부분이 64bit를 사용하기 때문에 문제는 없을 것이다.
다음으로 개발환경을 설치할 디스크 드라이브를 선택하는 것이다.
**이것은 무조건 C드라이브를 추천한다.**
개발환경을 구성할 때 각종 관련 프로그램이나 파일의 경로를 절대경로를 입력하게 된다.
그래서, 개발환경을 구성할 때도 모든 개발자에게 예외 없이 적용할 수 있는 디스크 드라이브를 사용해야 한다.
보통은 C드라이브 외에 D드라이브를 사용하지만 가끔씩 D드라이브가 없는 경우도 있고, SSD와 HDD를 같이 사용하는 경우에도 보통은 SSD를 C드라이브로 지정하기 때문에 최적의 선택은 C드라이브이다.

통합개발환경(IDE)에 대한 최적화도 필요하다.
Spell Check나 각종 Validation이 켜져 있는 경우, 코드를 입력할 때나 개발툴을 시작할 때마다 내용에 대한 각종 체크를 수행하면서 시간을 소모하기 때문에 개발을 바로 하지 못 하고 기다려야 한다.
이런 기능들은 잘 확인해서 꼭 필요한 기능 외에는 모두 꺼 놓는 것이 좋다.
나 같은 경우는 일단 거의 모두 꺼 놓고 개발하다가 문제가 생기면 하나씩 켜는 방식으로 한다.

스프링 프레임워크를 사용한다면 이클립스에 스프링 프레임워크 플러그인을 설치해서 사용하는 것보다는 STS(Spring Tool Suite)를 사용하는 것을 추천하고 싶다.
물론 스프링 프레임워크 플러그인도 추천 이클립스 버전을 제시하기 때문에 거의 문제가 발생할 가능성은 적지만, 이클립스가 마이너 업그레이드 등이 되면서 변경이 생겨 플러그인과 문제가 생길 가능성이 있다.
하지만, STS는 이클립스와 스프링 플러그인을 붙여서 나름 최적화시킨 버전이기 때문에 이클립스에 스프링 플러그인을 설치한 것보다 안정적일 가능성이 높다.

여기에 또 다른 이클립스 플러그인을 설치할 일이 생길 수도 있다.
화면구현을 JSP가 아닌 별도 화면 클라이언트 툴을 사용할 수도 있다.
이런 툴이 이클립스 플러그인 형태로 개발툴을 제공하는 경우도 있고 별도 개발툴 프로그램을 제공할 수도 있다.
별도 프로그램을 제공하는 경우는 그냥 설치해서 사용하면 되겠지만 이클립스 플러그인 형태일 경우는 서버 개발환경으로 사용하는 이클립스에 설치할지 아니면 그와 별도의 이클립스를 구성해서 사용할지 결정이 필요하다.
일단, 화면 개발툴의 플러그인도 추천하는 이클립스 버전이 있을 것이다.
이렇게 이클립스 플러그인들이 늘어날수록 사용할 수 있는 이클립스 버전에 제약이 늘어나고, 가끔은 모든 플러그인을 만족하는 이클립스 버전이 없을 수도 있다.
그리고, 플러그인이 늘어날수록 이클립스가 무거워지고 플러그인들간의 충돌로 이클립스가 죽을 수도 있다.
그래서, 화면개발툴 플러그인처럼 무거운 것은 업체에서 추천하는 이클립스 버전에 별도의 프로세스로 띄워서 사용하는 것을 추천한다.
요즘은 대부분 개발자가 8GB RAM에 듀얼모니터를 사용하기 때문에 개발툴 2개 띄우고 테스트용 화면까지 보면서 테스트해도 무리는 없을 것이다.

로컬 테스트를 위한 이클립스용 WAS 플러그인도 필요하다.
WAS 버전이 결정되어 있기 때문에 이 버전에 맞는 플러그인을 설치해서 사용하면 되는데 여기도 보통 추천 이클립스 버전이 있으므로, 여기서도 이클립스 버전에 대한 제약이 생긴다.
WAS 플러그인을 설치한 후엔 반드시 debug 모드로 동작이 되는지도 확인해야 한다.
WAS의 debug 모드는 프로그램 버그를 찾는 데 있어 정말 위대한 기능이기 때문에 꼭 확인해야 한다.
사실 가끔씩은 프로젝트에서 사용할 WAS와 동일한 플러그인을 사용하지 않을 수도 있다.
WAS의 기능이 아주 많아서 한번 기동할 때마다 아주 오래 기다려야 하는 경우도 있을 경우에는 설정에서 사용하지 않는 기능을 비활성화시키는 경우도 있고, 그래도 안 되는 경우는 로컬 개발환경에만 비슷한 기능을 제공하는 가벼운 WAS와 플러그인을 사용하는 경우도 있다.
혹은, WAS 플러그인이 추천하는 이클립스의 버전이 다른 플러그인과 너무 동떨어져 도저히 맞출 수가 없거나, WAS 플러그인이 꼭 필요한 기능을 제공하지 않을 경우에도 다른 WAS의 플러그인으로 대체할 수 있다.
이렇게 로컬 개발환경의 WAS와 서버의 WAS가 다를 경우에는 개발서버에서 면밀한 테스트를 수행해서 혹시 WAS간의 구현 차이에서 발생할 수 있는 오류의 발생을 방지해야 한다.

소스형상관리를 위한 플러그인도 필요하다.
이것은 미리 형상관리서버를 설치하고, 플러그인에서 여기에 연결하는 테스트까지 완료해야 한다.
개발자에게 개발환경을 배포할 때는 형상관리 플러그인에 저장된 패스워드를 초기화하거나 테스트 때 사용한 형상관리서버의 계정에 대한 패스워드를 바꿔 놓아야 한다.
배포된 개발환경에서 바로 형상관리서버에 자동으로 로그인이 되면 개발자들은 계정정보를 변경하지 않고 그냥 쓰기 때문에 나중에 소스를 commit한 개발자를 찾기가 어려워진다.

프로젝트에서 소스 정적분석에 사용할 툴(PMD 등)도 설치해서 제공한다.

이외에 Maven이나 Ant 등의 빌드툴도 필요할 경우 설치하고, Maven을 사용한다면 Local Repository 등도 설정이 필요하다.

마지막으로 이 모든 것들을 깔끔하게 묶어서 개발자들이 개발환경을 설치할 때 별도의 작업을 최소화하기 위한 작업이 필요하다.
이 방법을 처음 본 것이 2005년이었고 대부분의 프로젝트에서 개발환경을 이렇게 배포하고 있긴 한데 확인차원에서 설명하려고 한다.

먼저 JDK는 설치가 필요하기 때문에 사용하기로 한 Java 버전(6, 7, 8, 9 등)의 가장 높은 bug patch 버전을 선택해서 32bit, 64bit 중 선택해서 다운로드하고, 이것을 그냥 설치한다.

일단 위에서 추천한 것과 같이 C드라이브를 사용하고, 여기에 DEV라는 폴더를 생성한다. 여기에 앞에서 설치한 Java 경로를 찾아가 JDK 폴더(예를 들면 jdk1.8.0_111 등)를 통째로 복사해서 C:\DEV 아래에 붙여 넣는다.
다음으로 이클립스(또는 STS), WAS, 빌드툴, 이클립스 workspace, Maven Local Repository 등 윈도우 설치형이 아닌 모든 툴과 경로를 C:\DEV 아래에 설치하는데 Java를 포함한 모든 참조경로를 C:\DEV에 있는 경로로 설정한다.
여기서 한 모든 작업이 C:\DEV라는 큰 크림을 완성하기 위한 과정이다.

이렇게 준비한 로컬 개발환경을 개발자에게 배포하는 단계는 개발프레임워크의 개발이 끝나고 샘플프로그램까지 만든 뒤에 하겠지만, 어쨌든 그때에는 C:\DEV 폴더를 통째로 압축해서 전달하면 이 압축파일을 C드라이브에 푸는 것만으로 개발환경 준비가 거의 끝나게 될 것이다.

이외에 DB 클라이언트 프로그램의 경우는 단순히 압축을 푸는 방식이 아닌 윈도우 설치프로그램이 많기 때문에 별도로 설치해서 사용하면 된다.

<br/>
